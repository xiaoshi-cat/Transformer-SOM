2025-11-17 20:57:27,050 - INFO - 处理数据 - 形状: (56, 6), 拟合标准化器: True
2025-11-17 20:57:27,050 - INFO - 使用 standard 方法进行数据标准化
2025-11-17 20:57:27,052 - INFO - 训练数据标准化完成，使用 standard 方法
2025-11-17 20:57:27,052 - INFO - 训练样本数: 56
2025-11-17 20:57:27,052 - INFO - 测试样本数: 11
2025-11-17 20:57:27,052 - INFO - 特征数: 6
2025-11-17 20:57:27,052 - INFO - 水源类型: ['Source_A', 'Source_B', 'Source_C', 'Source_D']
2025-11-17 20:57:29,214 - INFO - PCA散点图已保存，前两个主成分解释方差: [0.56093162 0.2271672 ]
2025-11-17 20:57:30,163 - INFO - 饼状图已保存
2025-11-17 20:57:31,461 - INFO - 特征重要性排序:
2025-11-17 20:57:31,462 - INFO -   HCO3: 0.3070
2025-11-17 20:57:31,462 - INFO -   SO4: 0.2561
2025-11-17 20:57:31,462 - INFO -   Ca: 0.1604
2025-11-17 20:57:31,462 - INFO -   Mg: 0.1173
2025-11-17 20:57:31,462 - INFO -   Cl: 0.1156
2025-11-17 20:57:31,462 - INFO -   Na: 0.0435
2025-11-17 20:57:31,463 - INFO - 
类别B和D的特征对比:
2025-11-17 20:57:31,463 - INFO -   Ca: B=0.840±0.722, D=0.418±0.486, 差异=0.422
2025-11-17 20:57:31,464 - INFO -   Mg: B=-0.509±1.209, D=-0.411±0.401, 差异=-0.098
2025-11-17 20:57:31,464 - INFO -   Na: B=-0.103±0.889, D=-0.152±0.758, 差异=0.048
2025-11-17 20:57:31,465 - INFO -   HCO3: B=-0.276±0.482, D=0.616±0.539, 差异=-0.893
2025-11-17 20:57:31,465 - INFO -   Cl: B=-0.068±1.133, D=0.562±0.326, 差异=-0.630
2025-11-17 20:57:31,466 - INFO -   SO4: B=0.214±0.622, D=-0.739±0.056, 差异=0.953
2025-11-17 20:57:35,982 - INFO - 开始 5 折交叉验证
2025-11-17 20:57:36,487 - INFO - 参数: grid_size=(5, 5), sigma=0.8, lr=0.3, 平均纯度: 0.8742
2025-11-17 20:57:37,013 - INFO - 参数: grid_size=(5, 5), sigma=0.8, lr=0.5, 平均纯度: 0.8909
2025-11-17 20:57:37,494 - INFO - 参数: grid_size=(5, 5), sigma=0.8, lr=0.7, 平均纯度: 0.8909
2025-11-17 20:57:37,882 - INFO - 参数: grid_size=(5, 5), sigma=1.0, lr=0.3, 平均纯度: 0.9091
2025-11-17 20:57:38,275 - INFO - 参数: grid_size=(5, 5), sigma=1.0, lr=0.5, 平均纯度: 0.9091
2025-11-17 20:57:38,664 - INFO - 参数: grid_size=(5, 5), sigma=1.0, lr=0.7, 平均纯度: 0.8909
2025-11-17 20:57:39,060 - INFO - 参数: grid_size=(5, 5), sigma=1.2, lr=0.3, 平均纯度: 0.8727
2025-11-17 20:57:39,447 - INFO - 参数: grid_size=(5, 5), sigma=1.2, lr=0.5, 平均纯度: 0.9091
2025-11-17 20:57:39,854 - INFO - 参数: grid_size=(5, 5), sigma=1.2, lr=0.7, 平均纯度: 0.8909
2025-11-17 20:57:40,254 - INFO - 参数: grid_size=(6, 6), sigma=0.8, lr=0.3, 平均纯度: 0.9273
2025-11-17 20:57:40,660 - INFO - 参数: grid_size=(6, 6), sigma=0.8, lr=0.5, 平均纯度: 0.9091
2025-11-17 20:57:41,054 - INFO - 参数: grid_size=(6, 6), sigma=0.8, lr=0.7, 平均纯度: 0.9091
2025-11-17 20:57:41,464 - INFO - 参数: grid_size=(6, 6), sigma=1.0, lr=0.3, 平均纯度: 0.9273
2025-11-17 20:57:41,851 - INFO - 参数: grid_size=(6, 6), sigma=1.0, lr=0.5, 平均纯度: 0.9091
2025-11-17 20:57:42,256 - INFO - 参数: grid_size=(6, 6), sigma=1.0, lr=0.7, 平均纯度: 0.9455
2025-11-17 20:57:42,642 - INFO - 参数: grid_size=(6, 6), sigma=1.2, lr=0.3, 平均纯度: 0.9273
2025-11-17 20:57:43,059 - INFO - 参数: grid_size=(6, 6), sigma=1.2, lr=0.5, 平均纯度: 0.9455
2025-11-17 20:57:43,455 - INFO - 参数: grid_size=(6, 6), sigma=1.2, lr=0.7, 平均纯度: 0.9273
2025-11-17 20:57:43,894 - INFO - 参数: grid_size=(7, 7), sigma=0.8, lr=0.3, 平均纯度: 0.9091
2025-11-17 20:57:44,294 - INFO - 参数: grid_size=(7, 7), sigma=0.8, lr=0.5, 平均纯度: 0.9091
2025-11-17 20:57:44,716 - INFO - 参数: grid_size=(7, 7), sigma=0.8, lr=0.7, 平均纯度: 0.9636
2025-11-17 20:57:45,127 - INFO - 参数: grid_size=(7, 7), sigma=1.0, lr=0.3, 平均纯度: 0.9273
2025-11-17 20:57:45,574 - INFO - 参数: grid_size=(7, 7), sigma=1.0, lr=0.5, 平均纯度: 0.9091
2025-11-17 20:57:45,964 - INFO - 参数: grid_size=(7, 7), sigma=1.0, lr=0.7, 平均纯度: 0.8909
2025-11-17 20:57:46,400 - INFO - 参数: grid_size=(7, 7), sigma=1.2, lr=0.3, 平均纯度: 0.9636
2025-11-17 20:57:46,810 - INFO - 参数: grid_size=(7, 7), sigma=1.2, lr=0.5, 平均纯度: 0.9636
2025-11-17 20:57:47,239 - INFO - 参数: grid_size=(7, 7), sigma=1.2, lr=0.7, 平均纯度: 0.9636
2025-11-17 20:57:47,239 - INFO - 交叉验证完成，最佳参数: {'grid_size': (7, 7), 'sigma': 0.8, 'learning_rate': 0.7}, 最佳分数: 0.9636
2025-11-17 20:57:47,239 - INFO - 使用最佳参数在整个训练集上训练最终模型
2025-11-17 20:57:47,240 - INFO - 创建SOM模型，网格大小: (7, 7), 输入维度: 6
2025-11-17 20:57:47,240 - INFO - 开始训练SOM，迭代次数: 1500
2025-11-17 20:57:47,430 - INFO - SOM训练完成
2025-11-17 20:57:47,434 - INFO - 训练集聚类纯度: 0.9464
2025-11-17 20:57:48,391 - INFO - 基于混淆矩阵的准确率: 0.9464
2025-11-17 20:57:48,406 - INFO - 分类报告:
              precision    recall  f1-score   support

    Source_A       0.93      1.00      0.97        14
    Source_B       0.91      0.91      0.91        11
    Source_C       0.93      1.00      0.97        14
    Source_D       1.00      0.88      0.94        17

    accuracy                           0.95        56
   macro avg       0.94      0.95      0.94        56
weighted avg       0.95      0.95      0.95        56

2025-11-17 20:57:50,363 - INFO - SOM激活图已保存
2025-11-17 20:57:51,792 - INFO - SOM标签图已保存
2025-11-17 20:57:53,922 - INFO - SOM U型矩阵图已保存
2025-11-17 20:57:53,925 - INFO - 
详细激活分析:
2025-11-17 20:57:53,925 - INFO - 神经元 (0, 0): 3 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-17 20:57:53,925 - INFO - 神经元 (0, 2): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,925 - INFO - 神经元 (0, 4): 2 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,926 - INFO - 神经元 (0, 5): 4 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,926 - INFO - 神经元 (1, 0): 1 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,926 - INFO - 神经元 (1, 2): 2 个样本, 主要标签: Source_A, 纯度: 0.50
2025-11-17 20:57:53,926 - INFO - 神经元 (1, 4): 3 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,926 - INFO - 神经元 (1, 5): 2 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-17 20:57:53,927 - INFO - 神经元 (1, 6): 6 个样本, 主要标签: Source_C, 纯度: 0.83
2025-11-17 20:57:53,927 - INFO - 神经元 (2, 3): 1 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,927 - INFO - 神经元 (2, 4): 1 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,927 - INFO - 神经元 (2, 5): 1 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-17 20:57:53,927 - INFO - 神经元 (2, 6): 1 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-17 20:57:53,928 - INFO - 神经元 (3, 0): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,928 - INFO - 神经元 (3, 1): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,928 - INFO - 神经元 (3, 2): 1 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-17 20:57:53,928 - INFO - 神经元 (3, 3): 1 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,928 - INFO - 神经元 (3, 5): 1 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,929 - INFO - 神经元 (4, 0): 3 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,929 - INFO - 神经元 (4, 2): 3 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-17 20:57:53,929 - INFO - 神经元 (4, 4): 1 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-17 20:57:53,929 - INFO - 神经元 (4, 5): 1 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-17 20:57:53,929 - INFO - 神经元 (4, 6): 2 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-17 20:57:53,929 - INFO - 神经元 (5, 0): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,930 - INFO - 神经元 (5, 1): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,930 - INFO - 神经元 (5, 3): 1 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-17 20:57:53,930 - INFO - 神经元 (5, 4): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,930 - INFO - 神经元 (5, 6): 1 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-17 20:57:53,930 - INFO - 神经元 (6, 0): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,931 - INFO - 神经元 (6, 1): 2 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,931 - INFO - 神经元 (6, 2): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-17 20:57:53,931 - INFO - 神经元 (6, 3): 1 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-17 20:57:53,931 - INFO - 神经元 (6, 5): 2 个样本, 主要标签: Source_B, 纯度: 0.50
2025-11-17 20:57:53,931 - INFO - 神经元 (6, 6): 1 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-17 20:57:53,932 - INFO - 处理数据 - 形状: (11, 6), 拟合标准化器: False
2025-11-17 20:57:53,933 - INFO - 使用 standard 方法进行数据标准化
2025-11-17 20:57:53,933 - INFO - 测试数据标准化完成，使用训练时拟合的 standard 标准化器
2025-11-17 20:57:53,933 - INFO - 开始测试集评估
2025-11-17 20:57:54,877 - INFO - 基于混淆矩阵的准确率: 1.0000
2025-11-17 20:57:54,890 - INFO - 分类报告:
              precision    recall  f1-score   support

    Source_A       1.00      1.00      1.00         3
    Source_B       1.00      1.00      1.00         2
    Source_C       1.00      1.00      1.00         3
    Source_D       1.00      1.00      1.00         3

    accuracy                           1.00        11
   macro avg       1.00      1.00      1.00        11
weighted avg       1.00      1.00      1.00        11

2025-11-17 20:57:54,896 - INFO - 测试集结果已保存到: results/test_results.csv
2025-11-17 20:57:54,896 - INFO - ============================================================
2025-11-17 20:57:54,896 - INFO - 测试集性能评估
2025-11-17 20:57:54,897 - INFO - ============================================================
2025-11-17 20:57:54,897 - INFO - 测试集样本数量: 11
2025-11-17 20:57:54,897 - INFO - 测试集聚类纯度: 1.0000
2025-11-17 20:57:54,897 - INFO - 测试集准确率: 1.0000
2025-11-17 20:57:54,897 - INFO - 正确预测的样本数量: 11
2025-11-17 20:57:54,897 - INFO - 错误预测的样本数量: 0
2025-11-17 20:57:54,898 - INFO - Source_A准确率: 1.0000 (样本数: 3)
2025-11-17 20:57:54,899 - INFO - Source_B准确率: 1.0000 (样本数: 2)
2025-11-17 20:57:54,900 - INFO - Source_C准确率: 1.0000 (样本数: 3)
2025-11-17 20:57:54,900 - INFO - Source_D准确率: 1.0000 (样本数: 3)
2025-11-17 20:57:56,345 - INFO - PCA散点图已保存，前两个主成分解释方差: [0.60704317 0.30263466]
2025-11-17 20:57:57,358 - INFO - 饼状图已保存
2025-11-17 20:57:59,334 - INFO - SOM激活图已保存
2025-11-17 20:58:00,519 - INFO - SOM标签图已保存
