2025-11-24 20:51:23,694 - INFO - 处理数据 - 形状: (56, 6), 拟合标准化器: True
2025-11-24 20:51:23,694 - INFO - 使用 standard 方法进行数据标准化
2025-11-24 20:51:23,695 - INFO - 训练数据标准化完成，使用 standard 方法
2025-11-24 20:51:23,695 - INFO - 训练样本数: 56
2025-11-24 20:51:23,696 - INFO - 测试样本数: 11
2025-11-24 20:51:23,696 - INFO - 特征数: 6
2025-11-24 20:51:23,696 - INFO - 水源类型: ['Source_A', 'Source_B', 'Source_C', 'Source_D']
2025-11-24 20:51:25,351 - INFO - PCA散点图已保存，前两个主成分解释方差: [0.57350912 0.21756845]
2025-11-24 20:51:26,208 - INFO - 饼状图已保存
2025-11-24 20:51:27,529 - INFO - 特征重要性排序:
2025-11-24 20:51:27,529 - INFO -   HCO3: 0.3867
2025-11-24 20:51:27,529 - INFO -   SO4: 0.2110
2025-11-24 20:51:27,529 - INFO -   Ca: 0.1916
2025-11-24 20:51:27,530 - INFO -   Cl: 0.1170
2025-11-24 20:51:27,530 - INFO -   Mg: 0.0679
2025-11-24 20:51:27,530 - INFO -   Na: 0.0257
2025-11-24 20:51:27,530 - INFO - 
类别B和D的特征对比:
2025-11-24 20:51:27,531 - INFO -   Ca: B=1.032±0.569, D=0.657±0.345, 差异=0.375
2025-11-24 20:51:27,531 - INFO -   Mg: B=-0.720±1.284, D=-0.494±0.364, 差异=-0.226
2025-11-24 20:51:27,532 - INFO -   Na: B=-0.080±0.889, D=-0.409±0.672, 差异=0.329
2025-11-24 20:51:27,532 - INFO -   HCO3: B=-0.200±0.297, D=0.708±0.047, 差异=-0.908
2025-11-24 20:51:27,533 - INFO -   Cl: B=0.244±1.176, D=0.488±0.295, 差异=-0.245
2025-11-24 20:51:27,533 - INFO -   SO4: B=0.031±0.562, D=-0.725±0.034, 差异=0.756
2025-11-24 20:51:31,596 - INFO - 开始 5 折交叉验证
2025-11-24 20:51:31,958 - INFO - 参数: grid_size=(5, 5), sigma=0.8, lr=0.3, 平均纯度: 0.9818
2025-11-24 20:51:32,317 - INFO - 参数: grid_size=(5, 5), sigma=0.8, lr=0.5, 平均纯度: 0.9636
2025-11-24 20:51:32,672 - INFO - 参数: grid_size=(5, 5), sigma=0.8, lr=0.7, 平均纯度: 0.9636
2025-11-24 20:51:33,025 - INFO - 参数: grid_size=(5, 5), sigma=1.0, lr=0.3, 平均纯度: 0.9818
2025-11-24 20:51:33,377 - INFO - 参数: grid_size=(5, 5), sigma=1.0, lr=0.5, 平均纯度: 1.0000
2025-11-24 20:51:33,734 - INFO - 参数: grid_size=(5, 5), sigma=1.0, lr=0.7, 平均纯度: 0.9636
2025-11-24 20:51:34,084 - INFO - 参数: grid_size=(5, 5), sigma=1.2, lr=0.3, 平均纯度: 0.9818
2025-11-24 20:51:34,438 - INFO - 参数: grid_size=(5, 5), sigma=1.2, lr=0.5, 平均纯度: 0.9818
2025-11-24 20:51:34,794 - INFO - 参数: grid_size=(5, 5), sigma=1.2, lr=0.7, 平均纯度: 1.0000
2025-11-24 20:51:35,197 - INFO - 参数: grid_size=(6, 6), sigma=0.8, lr=0.3, 平均纯度: 0.9818
2025-11-24 20:51:35,590 - INFO - 参数: grid_size=(6, 6), sigma=0.8, lr=0.5, 平均纯度: 0.9818
2025-11-24 20:51:35,954 - INFO - 参数: grid_size=(6, 6), sigma=0.8, lr=0.7, 平均纯度: 0.9636
2025-11-24 20:51:36,326 - INFO - 参数: grid_size=(6, 6), sigma=1.0, lr=0.3, 平均纯度: 0.9818
2025-11-24 20:51:36,693 - INFO - 参数: grid_size=(6, 6), sigma=1.0, lr=0.5, 平均纯度: 1.0000
2025-11-24 20:51:37,065 - INFO - 参数: grid_size=(6, 6), sigma=1.0, lr=0.7, 平均纯度: 1.0000
2025-11-24 20:51:37,437 - INFO - 参数: grid_size=(6, 6), sigma=1.2, lr=0.3, 平均纯度: 0.9818
2025-11-24 20:51:37,808 - INFO - 参数: grid_size=(6, 6), sigma=1.2, lr=0.5, 平均纯度: 1.0000
2025-11-24 20:51:38,187 - INFO - 参数: grid_size=(6, 6), sigma=1.2, lr=0.7, 平均纯度: 0.9636
2025-11-24 20:51:38,568 - INFO - 参数: grid_size=(7, 7), sigma=0.8, lr=0.3, 平均纯度: 0.9636
2025-11-24 20:51:38,946 - INFO - 参数: grid_size=(7, 7), sigma=0.8, lr=0.5, 平均纯度: 0.9636
2025-11-24 20:51:39,358 - INFO - 参数: grid_size=(7, 7), sigma=0.8, lr=0.7, 平均纯度: 0.9818
2025-11-24 20:51:39,739 - INFO - 参数: grid_size=(7, 7), sigma=1.0, lr=0.3, 平均纯度: 0.9636
2025-11-24 20:51:40,123 - INFO - 参数: grid_size=(7, 7), sigma=1.0, lr=0.5, 平均纯度: 0.9636
2025-11-24 20:51:40,502 - INFO - 参数: grid_size=(7, 7), sigma=1.0, lr=0.7, 平均纯度: 0.9818
2025-11-24 20:51:40,892 - INFO - 参数: grid_size=(7, 7), sigma=1.2, lr=0.3, 平均纯度: 0.9818
2025-11-24 20:51:41,274 - INFO - 参数: grid_size=(7, 7), sigma=1.2, lr=0.5, 平均纯度: 0.9818
2025-11-24 20:51:41,662 - INFO - 参数: grid_size=(7, 7), sigma=1.2, lr=0.7, 平均纯度: 1.0000
2025-11-24 20:51:41,663 - INFO - 交叉验证完成，最佳参数: {'grid_size': (5, 5), 'sigma': 1.0, 'learning_rate': 0.5}, 最佳分数: 1.0000
2025-11-24 20:51:41,663 - INFO - 使用最佳参数在整个训练集上训练最终模型
2025-11-24 20:51:41,663 - INFO - 创建SOM模型，网格大小: (5, 5), 输入维度: 6
2025-11-24 20:51:41,664 - INFO - 开始训练SOM，迭代次数: 2500
2025-11-24 20:51:41,969 - INFO - SOM训练完成
2025-11-24 20:51:41,972 - INFO - 训练集聚类纯度: 0.9464
2025-11-24 20:51:42,846 - INFO - 基于混淆矩阵的准确率: 0.9464
2025-11-24 20:51:42,860 - INFO - 分类报告:
              precision    recall  f1-score   support

    Source_A       1.00      1.00      1.00        15
    Source_B       1.00      1.00      1.00        11
    Source_C       0.92      0.86      0.89        14
    Source_D       0.88      0.94      0.91        16

    accuracy                           0.95        56
   macro avg       0.95      0.95      0.95        56
weighted avg       0.95      0.95      0.95        56

2025-11-24 20:51:44,725 - INFO - SOM激活图已保存
2025-11-24 20:51:45,939 - INFO - SOM标签图已保存
2025-11-24 20:51:47,827 - INFO - SOM U型矩阵图已保存
2025-11-24 20:51:47,831 - INFO - 
详细激活分析:
2025-11-24 20:51:47,831 - INFO - 神经元 (0, 0): 3 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-24 20:51:47,831 - INFO - 神经元 (0, 1): 1 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-24 20:51:47,831 - INFO - 神经元 (0, 2): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,832 - INFO - 神经元 (0, 3): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,832 - INFO - 神经元 (0, 4): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,832 - INFO - 神经元 (1, 0): 4 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-24 20:51:47,833 - INFO - 神经元 (1, 1): 3 个样本, 主要标签: Source_C, 纯度: 1.00
2025-11-24 20:51:47,833 - INFO - 神经元 (1, 3): 2 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,833 - INFO - 神经元 (1, 4): 3 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,833 - INFO - 神经元 (2, 0): 2 个样本, 主要标签: Source_C, 纯度: 0.50
2025-11-24 20:51:47,833 - INFO - 神经元 (2, 1): 6 个样本, 主要标签: Source_D, 纯度: 0.67
2025-11-24 20:51:47,834 - INFO - 神经元 (2, 3): 2 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,834 - INFO - 神经元 (2, 4): 2 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,834 - INFO - 神经元 (3, 0): 2 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-24 20:51:47,834 - INFO - 神经元 (3, 1): 7 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-24 20:51:47,834 - INFO - 神经元 (3, 3): 2 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,834 - INFO - 神经元 (3, 4): 4 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-24 20:51:47,835 - INFO - 神经元 (4, 0): 2 个样本, 主要标签: Source_D, 纯度: 1.00
2025-11-24 20:51:47,835 - INFO - 神经元 (4, 1): 1 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-24 20:51:47,835 - INFO - 神经元 (4, 2): 4 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-24 20:51:47,835 - INFO - 神经元 (4, 3): 1 个样本, 主要标签: Source_A, 纯度: 1.00
2025-11-24 20:51:47,835 - INFO - 神经元 (4, 4): 2 个样本, 主要标签: Source_B, 纯度: 1.00
2025-11-24 20:51:49,217 - INFO - train集 ROC曲线已保存
2025-11-24 20:51:50,446 - INFO - train集 精确率-召回率曲线已保存
2025-11-24 20:51:51,884 - INFO - train集 各类别性能曲线已保存
2025-11-24 20:51:51,886 - INFO - 处理数据 - 形状: (11, 6), 拟合标准化器: False
2025-11-24 20:51:51,886 - INFO - 使用 standard 方法进行数据标准化
2025-11-24 20:51:51,888 - INFO - 测试数据标准化完成，使用训练时拟合的 standard 标准化器
2025-11-24 20:51:51,888 - INFO - 开始测试集评估
2025-11-24 20:51:52,770 - INFO - 基于混淆矩阵的准确率: 0.9091
2025-11-24 20:51:52,782 - INFO - 分类报告:
              precision    recall  f1-score   support

    Source_A       1.00      1.00      1.00         3
    Source_B       1.00      1.00      1.00         2
    Source_C       0.75      1.00      0.86         3
    Source_D       1.00      0.67      0.80         3

    accuracy                           0.91        11
   macro avg       0.94      0.92      0.91        11
weighted avg       0.93      0.91      0.91        11

2025-11-24 20:51:52,787 - INFO - 测试集结果已保存到: results/test_results.csv
2025-11-24 20:51:52,787 - INFO - ============================================================
2025-11-24 20:51:52,787 - INFO - 测试集性能评估
2025-11-24 20:51:52,788 - INFO - ============================================================
2025-11-24 20:51:52,788 - INFO - 测试集样本数量: 11
2025-11-24 20:51:52,788 - INFO - 测试集聚类纯度: 0.9091
2025-11-24 20:51:52,788 - INFO - 测试集准确率: 0.9091
2025-11-24 20:51:52,788 - INFO - 正确预测的样本数量: 10
2025-11-24 20:51:52,788 - INFO - 错误预测的样本数量: 1
2025-11-24 20:51:52,808 - INFO - Source_A准确率: 1.0000 (样本数: 3)
2025-11-24 20:51:52,809 - INFO - Source_B准确率: 1.0000 (样本数: 2)
2025-11-24 20:51:52,810 - INFO - Source_C准确率: 1.0000 (样本数: 3)
2025-11-24 20:51:52,811 - INFO - Source_D准确率: 0.6667 (样本数: 3)
2025-11-24 20:51:54,221 - INFO - PCA散点图已保存，前两个主成分解释方差: [0.5465692  0.41065884]
2025-11-24 20:51:55,031 - INFO - 饼状图已保存
2025-11-24 20:51:56,905 - INFO - SOM激活图已保存
2025-11-24 20:51:58,022 - INFO - SOM标签图已保存
2025-11-24 20:51:59,272 - INFO - test集 ROC曲线已保存
2025-11-24 20:52:00,434 - INFO - test集 精确率-召回率曲线已保存
2025-11-24 20:52:01,850 - INFO - test集 各类别性能曲线已保存
2025-11-24 20:52:02,692 - INFO - 准确率曲线已保存
2025-11-24 20:52:03,542 - INFO - 召回率曲线已保存
2025-11-24 20:52:04,753 - INFO - 综合指标对比图已保存
